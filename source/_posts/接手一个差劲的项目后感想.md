---
title: 当接手一个新的项目时需要优先注意的点
date: 2020-12-05 17:11:22
categories: 项目交接
toc: true
---

接手的项目可能是一个好项目; 但一般来说烂项目的多一些,接手后需要检查一些事情,防止被坑

<!--more-->

# 基础检查

## 数据库

- 检查<font color='red'>核心流程的sql是否走索引</font>.**特别是更新语句**,不走索引会锁全表
  - 影响:随着表数据量多,当出现并发请求时会造成堵塞
- <font color='red'>**生产的数据库必须要一个只读账号让所有开发/技术支持使用**</font>

## 服务

- <font color='red'>是否存在单节点的服务</font>,升级多个服务,注意是否有定时任务,多台是否有影响
- 要与项目或运营及时沟通,如果客户有很大活动可能会造成请求骤升;考虑是否需要扩容

## 代码

- 对代码的线程池必须检查下,特别是**异步走默认配置的**,会有一个Integer.MAX_VALUE长度的队列,并且服务重启队列中的消息会直接丢失<font color='red'>并且堵塞不易被监控到</font>
- mq消费者是否有try-catch;防止消息被堵住
- 重试/递归场景是否会因为数据问题出现无限循环的情况
- 查询语句根据场景加时间区间,防止数据量提升后sql性能骤降
- 使用分布式锁是否有被正常释放

## 日志和监控

- <font color='red'>针对日志中所有error日志进行跟踪排查</font>,需要修复的进行修复，<font color='red'>**每一次发版后对error日志必须严格跟踪,次日再次跟踪**</font>
- <font color='red'>要做好链路追踪,包括内部的消费服务</font>,对于重要日志要进行补充提升处理问题的效率
- <font color='red'>对监控到慢sql要进行追踪</font>
- 对堵塞的queue要立刻跟踪
- 监控服务器/db/redis/mq 的 内存/cpu进行监控

## 项目开发

### 需求

- 影响使用的bug要优先解决; 如果影响需求开发,**项目和产品一般来说不管bug!!!**, 和项目扯皮,互相理解下,让他们的需求延后;
- 非紧急bug在日常迭代中适当安排进行处理